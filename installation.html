<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="本项目的目标是提供php项目使用Jenkins创建任务的标准模版" />
  <meta name="author" content="Sebastian Bergmann" />
  <title>Jenkins任务模版-PHP版: 安装</title>
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <link href="css/style.css" rel="stylesheet">
  <link href="http://fonts.googleapis.com/css?family=Open+Sans:400,700|Source+Code+Pro:400,700" rel="stylesheet" type="text/css">
  <!--[if lt IE 9]>
  <script src="js/html5shiv.js"></script>
  <script src="js/respond.min.js"></script>
  <![endif]-->
 </head>
 <body>
  <div id="wrap">
   <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">
     <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
       <span class="sr-only">Toggle Navigation</span>
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
       <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Jenkins任务模版-PHP版</a>
     </div>
     <div class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
       <li><a href="index.html">首页</a></li>
       <li class="active"><a href="installation.html">安装</a></li>
          <li><a href="automation.html">自动化</a></li>
          <li><a href="configuration.html">配置</a></li>
          <li><a href="integration.html">集成</a></li>
          <li><a href="example.html">实例</a></li>
          <li><a href="support.html">支持</a></li>
      </ul>
     </div>
    </div>
   </div>
   <div class="container">
    <div class="page-header">
     <h1>安装</h1>
    </div>
    <h2>必须的 Jenkins 插件</h2>
    <p>请安装如下 Jenkins 插件:</p>
    <ul>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/Checkstyle+Plugin">Checkstyle</a> (为了执行 <a href="http://pear.php.net/PHP_CodeSniffer">PHP_CodeSniffer</a> 提供的风格检查Checkstyle)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/Clover+PHP+Plugin">Clover PHP</a> (为了执行 <a href="http://www.phpunit.de/">PHPUnit</a>的 CClover)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/Crap4J+Plugin">Crap4J</a> (为了执行 <a href="http://www.phpunit.de/">PHPUnit</a>的 Crap4J)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/DRY+Plugin">DRY</a> (为了执行 <a href="https://github.com/sebastianbergmann/phpcpd">phpcpd</a>  PMD-CPD 检查)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin">HTML Publisher</a> (为了生成 <a href="http://phpdox.de/">phpDox</a>格式文档)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/JDepend+Plugin">JDepend</a> (为了执行 <a href="http://pdepend.org/">PHP_Depend</a> JDepend 依赖检查)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/Plot+Plugin">Plot</a> (为了执行 <a href="https://github.com/sebastianbergmann/phploc">phploc</a> CSV output)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/PMD+Plugin">PMD</a> (为了执行 <a href="http://phpmd.org/">PHPMD</a>  PMD 检查)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/Violations">Violations</a> (为了支持更多中报错输出)</p></li>
     <li><p><a href="https://wiki.jenkins-ci.org/display/JENKINS/Warnings+Plugin">Warnings</a> (为了执行在控制台中输出php编译报错)</p></li>
     <li><p><a href="http://wiki.jenkins-ci.org/display/JENKINS/xUnit+Plugin">xUnit</a> (为了执行 <a href="http://www.phpunit.de/">PHPUnit</a>的 JUnit 检查)</p></li>
    </ul>
    <p>你可以在jenkins的web管理界面中安装插件 <dl><dd><code>http://localhost:8080/pluginManager/available</code></dd></dl> 或者用 <a href="http://wiki.jenkins-ci.org/display/JENKINS/Jenkins+CLI">Jenkins 终端执行</a>:</p>
    <pre>wget http://localhost:8080/jnlpJars/jenkins-cli.jar

java -jar jenkins-cli.jar -s http://localhost:8080 install-plugin checkstyle cloverphp crap4j dry htmlpublisher jdepend plot pmd violations warnings xunit

java -jar jenkins-cli.jar -s http://localhost:8080 safe-restart</pre>
    <p>如果遇到报错 "checkstyle is neither a valid file, URL, nor a plugin artifact name in the update center No update center data is retrieved yet", 你需要更新插件列表:</p>
    <pre>curl -L http://updates.jenkins-ci.org/update-center.json | sed '1d;$d' | curl -X POST -H 'Accept: application/json' -d @- http://localhost:8080/updateCenter/byId/default/postBack</pre>
    <p>上面要替换 <code>localhost:8080</code> 为你的Jenkins安装的地址和端口.</p>
    <h2>必须的 PHP 组件</h2>
    <p>请安装如下 PHP 组件:</p>
    <ul>
     <li><a href="http://phpunit.de/">PHPUnit</a></li>
     <li><a href="http://pear.php.net/package/PHP_CodeSniffer/">PHP_CodeSniffer</a></li>
     <li><a href="https://github.com/sebastianbergmann/phploc">PHPLOC</a></li>
     <li><a href="http://pdepend.org/">PHP_Depend</a></li>
     <li><a href="http://phpmd.org/">PHPMD</a></li>
     <li><a href="https://github.com/sebastianbergmann/phpcpd">PHPCPD</a></li>
     <li><a href="http://phpdox.de/">phpDox</a></li>
    </ul>
    <p>使用的前提是假设 <code>$PATH</code> 下可以调用到 <code>phpunit</code>, <code>phpcs</code>, <code>phploc</code>, <code>pdepend</code>, <code>phpmd</code>, <code>phpcpd</code>, and <code>phpdox</code>。你可以把phar文件放到<code>$PATH</code>路径下，或者利用<a href="http://getcomposer.org/doc/03-cli.md#global">Composer</a>的global 安装</p>
   </div>
  </div>
  <div id="footer">
   <div class="container">
    <p class="text-muted">The "<span xmlns:dct="http://purl.org/dc/terms/" href="http://purl.org/dc/dcmitype/Text" property="dct:title" rel="dct:type"><a xmlns:cc="http://creativecommons.org/ns#" href="http://jenkins-php.org/" property="cc:attributionName" rel="cc:attributionURL">Jenkins任务模版-PHP版</a></span>" by <a href="http://sebastian-bergmann.de/">Sebastian Bergmann</a> and his contributors is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/">Creative Commons Attribution-ShareAlike 3.0 Unported License</a>.</p>
   </div>
  </div>
  <script src="js/jquery.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script type="text/javascript">
  hljs.initHighlightingOnLoad();

  var _paq = _paq || [];
  _paq.push(["trackPageView"]);
  _paq.push(["enableLinkTracking"]);

  (function() {
    var u=(("https:" == document.location.protocol) ? "https" : "http") + "://piwik.sebastian-bergmann.de/";
    _paq.push(["setTrackerUrl", u+"piwik.php"]);
    _paq.push(["setSiteId", "6"]);
    var d=document, g=d.createElement("script"), s=d.getElementsByTagName("script")[0]; g.type="text/javascript";
    g.defer=true; g.async=true; g.src=u+"piwik.js"; s.parentNode.insertBefore(g,s);
  })();
  </script>
 </body>
</html>

